---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2021/3/26 11:16
---

local SGMissileStage = require("Engine/Systems/ObjectSystem/SGMissile/SGMissileStage")
local SGMissileStageCurve = class("SGMissileStageCurve", SGMissileStage)

function SGMissileStageCurve:Ctor(stageConfig, index)
    SGMissileStageCurve.__super.Ctor(self, stageConfig, index)
end

function SGMissileStageCurve:Start(missileObj, startPosition, startAngle)
    SGMissileStageCurve.__super.Start(self, missileObj, startPosition, startAngle)
    --local angle = missileObj.m_Owner:GetAngle()
    local curveID = self.m_Config.CurveID
    if not curveID then
        return
    end
    local bezierConfig = BezierCurveConfig[curveID]
    if not bezierConfig then
        Logger.LogErrorFormat("[SGMissileStageCurve](Start)Can not find curve config, curve id:" .. tostring(curveID))
        return
    end
    missileObj.m_Core:BeginCurveMove(bezierConfig.Path, self.m_MoveSpeed, startPosition, startAngle, self.m_Config.IsFinishContinue)
end

function SGMissileStageCurve:Exit()
    self.m_Owner.m_Core:StopCurveMove()
end

return SGMissileStageCurve